# ğŸ³ ë„ì»¤ ê¸°ë³¸ ê²½ë¡œ ë³€ê²½ ì‘ì—… ê¸°ë¡
## ê°œìš”

### ì‘ì—… 1. ê²½ë¡œ ë³€ê²½ ì „ ì‘ì—…

: í˜„ì¬ ë™ì‘ ì¤‘ì¸ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ëª¨ë‘ ì¤‘ì§€í•œë‹¤.<br>
: í˜¸ìŠ¤íŠ¸ ì‹œìŠ¤í…œ(Ubuntu)ì„ ì¢…ë£Œí•œ í›„ '128GB' ìš©ëŸ‰ì˜  HDDë¥¼ ì¶”ê°€, í†µìœ¼ë¡œ ìë™ë§ˆìš´íŠ¸

![](./img/20250528.img/0008.png)

![](./img/20250528.img/0009.png)

![](./img/20250528.img/0010.png)

ë„ì»¤ ë°ëª¬, ë„ì»¤ ìë™ ë°ëª¬ ì‹¤í–‰ ì¤‘ì§€

![](./img/20250528.img/0011.png)

```
systemctl stop docker
systemctl disable docker
```

### ì‘ì—… 2. ê²½ë¡œ ë³€ê²½ ì„¤ì •

#### ê¸°ë³¸ ê²½ë¡œ í™•ì¸
```
root@CloudDX:~# find / -name docker.service -type f
/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/docker.service
/usr/lib/systemd/system/docker.service
find: â€˜/run/user/1000/docâ€™: í—ˆê°€ ê±°ë¶€
find: â€˜/run/user/120/docâ€™: í—ˆê°€ ê±°ë¶€
```
![](./img/20250528.img/0012.png)

## ê¸°ë³¸ ê²½ë¡œ ì„¤ì • ë³€ê²½ 1.
##### pwd : /usr/lib/systemd/system

vi docker.service

![](./img/20250528.img/0013.png)

#### ì„¤ì • íŒŒì¼ ë³€ê²½ í›„ ë‹¤ì‹œ ë¡œë”©í•´ì„œ ì‹œìŠ¤í…œì— ì ìš© 1. ì˜¤ë¥˜
```
systemctl daemon-reload
```
ìˆ˜ì • í›„ ë°ëª¬ ì ìš©

#### ë„ì»¤ ë°ëª¬ ì¬ì‹œì‘ 1.
ì˜¤ë¥˜

![](./img/20250528.img/0014.png)

## ê¸°ë³¸ ê²½ë¡œ ì„¤ì • ë³€ê²½ 2. ì •ìƒ

ì„¤ì • íŒŒì¼ ë³€ê²½ í›„ ë‹¤ì‹œ ë¡œë”©í•´ì„œ ì‹œìŠ¤í…œì— ì ìš© 2. ì •ìƒ
#### /usr/lib/systemd/system/docker.service
![](./img/20250529.img/0001.png)

íŒŒì¼ ìˆ˜ì • í›„ ë°ëª¬ ì¬ì‹œì‘ 2. ì •ìƒ

![](./img/20250529.img/0002.png)

![](./img/20250529.img/0003.png)




ë„ì»¤ ê¸°ë³¸ ê²½ë¡œ ë³€ê²½ í™•ì¸ <br>

ì •ìƒì ìœ¼ë¡œ ë³€ê²½ ë˜ì—ˆë‹¤ë©´ ì›ë˜ ê¸°ë³¸ ê²½ë¡œ(/var/lib/docker/) ì•ˆì— ìˆë˜ ë‚´ìš©ë“¤ê³¼ ë™ì¼í•œ ë‚´ìš©ë“¤ì´ '/sdb' ì— ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](./img/20250529.img/0004.png)

![](./img/20250529.img/0005.png)

ì»¨í…Œì´ë„ˆê°€ ìˆëŠ” ê²½ìš°ì— ì´ë ‡ê²Œ ë‚˜ì˜¨ë‹¤.

```
   sudo ls -l /var/lib/docker/containers

      drwx--x--- 3 root root 4096  1ì›” 15 11:20 29000cb0b819dc096985180efe07f4fd3fa79f6f366906beae3397424f2c8962
      drwx--x--- 4 root root 4096  1ì›” 15 11:20 303a1983edcaae1861c40e852332b33c7b90e28af88c2a0d1940bd2cc7927e5f
      drwx--x--- 4 root root 4096  1ì›” 15 11:20 9c461a280817128bdc258f1606afc64c560682002d5143c6efe338abdd71daff
      drwx--x--- 4 root root 4096  1ì›” 15 11:20 abdcab3f51cf9e6d23d70ded7124fb3232df74b5136afe1376981b81d03669d5
      drwx--x--- 4 root root 4096  1ì›” 15 11:20 bfc381242c24d0e25b12baaf27758f9e07cbed36e675788ec7ca606e58bdae8b
      drwx--x--- 3 root root 4096  1ì›” 15 11:20 d338fda52621fe7ffe2752b71ffe7cc51ae373945968c6f016908b40bf08df1f
```

- ê¸°ë³¸ ê²½ë¡œê°€ ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸
- ë§ˆìš´íŠ¸ ì •ë³´ í™•ì¸
- ì´ë¯¸ì§€ ì¶”ê°€ í›„ ìš©ëŸ‰ í™•ì¸

![](./img/20250529.img/0006.png)

![](./img/20250529.img/0008.png)

```
du -hs * | sort -nr
```

![](./img/20250529.img/0007.png)

pwd /sdb/overlay2

ì´ë¯¸ì§€ë¥¼ ì‚­ì œ í•œ í›„ì˜ ìš©ëŸ‰ <br>ì „ â†’ í›„<br>
pwd = /sdb

![](./img/20250529.img/0006.png)
![](./img/20250529.img/0009.png)

pwd = /var/lib/docker

![](./img/20250529.img/0008.png)
![](./img/20250529.img/0010.png)

í˜„ì¬ ë„ì»¤ëŠ” /sdb ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ì—ì„œ ì‘ë™ì¤‘

### ì‹¤ìŠµ

#### ì´ë¯¸ì§€ 1ê°œë§Œ ë‹¤ìš´ë¡œë“œ

#### ë³„ë„ì˜ ì°½ì—ì„œ í™•ì¸ 1. ì´ë¯¸ì§€ ìƒì„± í›„ì˜ ë‚´ìš© ë³€í™”

![](./img/20250529.img/0011.png)

#### ì»¨í…Œì´ë„ˆ ìƒì„±

![](./img/20250529.img/0012.png)


#### ë³„ë„ì˜ ì°½ì—ì„œ í™•ì¸ 2. ì»¨í…Œì´ë„ˆ ìƒì„± í›„ì˜ ë‚´ìš© ë³€í™”

![](./img/20250529.img/0013.png)

![](./img/20250529.img/0014.png)

#### ë³„ë„ì˜ ì°½ì—ì„œ í™•ì¸ 3. ì»¨í…Œì´ë„ˆ ì ‘ì† í›„ì˜ ë‚´ìš© ë³€í™”

![](./img/20250529.img/0015.png)

![](./img/20250529.img/0016.png)

![](./img/20250529.img/0017.png)

#### ë‘ë²ˆì§¸ ì´ë¯¸ì§€ ì¶”ê°€ í™•ì¸

![](./img/20250529.img/0018.png)

![](./img/20250529.img/0019.png)

#### ë‘ë²ˆì§¸ ì´ë¯¸ì§€ ì¶”ê°€ í›„ ì»¨í…Œì´ë„ˆ ìƒì„± í›„ í™•ì¸

![](./img/20250529.img/0020.png)

![](./img/20250529.img/0021.png)

#### ë‘ë²ˆì§¸ ì´ë¯¸ì§€ ì¶”ê°€ í›„ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í›„ í™•ì¸

![](./img/20250529.img/0022.png)

![](./img/20250529.img/0023.png)

![](./img/20250529.img/0024.png)

### ì‹¤ìŠµ 2. `prune`

---

#### ğŸ“Œ ê°œìš”

- `docker prune` ëª…ë ¹ì€ **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì •ë¦¬(clean up)** í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
- ì´ë¥¼ í†µí•´ ë””ìŠ¤í¬ ê³µê°„ì„ í™•ë³´í•˜ê³ , ë¶ˆí•„ìš”í•œ ë„ì»¤ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤.
- ë‹¨, **ì‚­ì œ ëŒ€ìƒì€ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ì£¼ì˜ê°€ í•„ìš”**í•˜ë‹¤.
- ì´ ëª…ë ¹ì„ ì‚¬ìš©í•˜ê¸° ì „ì— ì‚­ì œí•´ì„œëŠ” ì•ˆë˜ëŠ” ì´ë¯¸ì§€ ë˜ëŠ” ì»¨í…Œì´ë„ˆëŠ” ë°˜ë“œì‹œ ë„ì»¤ í—ˆë¸Œì— ë°±ì—…í•˜ë„ë¡ í•œë‹¤.
---

ì´ˆê¸°ìƒíƒœ
![](./img/20250529.img/0024.png)
ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì¤‘ **sudo docker system prune**
![](./img/20250529.img/0025.png)

![](./img/20250529.img/0026.png)

ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì •ì§€

![](./img/20250529.img/0027.png)

ì „ë¶€ë‹¤ ì œê±°ë¨

![](./img/20250529.img/0028.png)

