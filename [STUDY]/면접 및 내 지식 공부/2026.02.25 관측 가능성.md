# 관측가능성

## 관측 가능성(observability)의 정의

시스템에서 외부로 출력되는 값만을 사용해서, 시스템의 내부 상태를 이해하고 예측하는 것

## 모니터링과 차이점

### 관측 가능성

**관측 가능성**이 지향하는 목표는 내부 시스템에 대한 자세한 이해를 기반으로 미래에 발생할 이벤트를 예측하는 것이고, 이러한 예측을 바탕으로 IT운영을 자동화하는 것

**관측 가능성**은 클라우드 네이티브처럼 분산되고 복잡한 시스템에서 발생하는 이벤트에 대한 통찰력 그리고 그리고 태그, 로그 등을 결합해서 서비스(MSA)에 대한 문맥 정보를 제공하는 것이 목표


### 모니터링

**모니터링**은 전체적인 시스템 상태를 이해하는 데 적합
'모든 것을 수집하고 모니터링'하기 보다는 가능한 샘플링을 사용해 적은 데이터를 수집하더라도 의미 있고 예측 가능한 결과를 도출해 내는 것이 좋은 모니터링 방법

전체적인 모니터링은 블랙박스 모니터링을 기본으로 핵심적인 애플리케이션과 시스템 메트릭에 집중

## 관측 가능성 구성 요소

## 메토릭

**메트릭**은 일정 시간 동안 측정된 데이터를 집계하고 이를 수치화

EX) 메시지 개수, 사용 중인 CPU와 메모리의 크기, 서비스에서 초당 처리하는 개수 등

## 로그

**로그**는 애플리케이션 실행 시 생성되는 텍스트 라인으로 구조적인 JSON 형식이나 비구조적인 텍스트 형식으로 출력

- 로그는 애플리케이션 에러와 경고를 확인
- 문제점에 대한 정확한 원인을 이해하기 위해 필요
- 시스템을 이해하는 기본적인 방법을 제공
- 집계와 알람 중심의 메트릭 시스템이 지원해주지 못하는 세부적인 정보를 제공
- 오래된 레거시 시스템과 패키지 애플리케이션일수록 메트릭보다 로그를 사용해서 시스템 내부를 이해하고, 문제 해결

## 추적 

**추적**은 마이크로서비스가 시스템을 경유하며 트랜잭션을 처리하는 과정에서 발생하는 세부적인 정보를 보여줌

트랜잭션이 시스템을 이동하는 경로, 트랜잭션을 처리하는 과정에서 발생하는 대기시간과 지연시간, 병목현상이나 에러를 일으키는 원인을 문맥과 로그, 태그 등의 메타데이터에 출력

분산 마이크로서비스간에 복잡한 상호작용이 발생하는 클라우드 네이티브 운영 환경에서 생기는 문제점은 그 현상을 이해하고 해결하는 데 과거의 툴과 로그, 메트릭만으로는 한계가 있다

