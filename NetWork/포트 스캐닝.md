# Port Scanning (포트 스캐닝)

## 1. TCP 연결 설정(3-Way Handshaking) 및 TCP 연결 종료(4-Way Handshaking)

### 개요

- 공격자(Attacker)와 공격 대상(Vimtim) 사이의 연결 상태를 통해 스캐닝할 수 있는 기법을 의미한다.
- 샥스핀을 통해서 확인이 가능하다.

### TCP 연결

공격자 → SYN → 공격대상 → SYN + ACK → 공격자 → ACK(연결 성공) → 공격대상

### TCP 종료

공격자 → FIN(연결 종료 요청) → 공격대상 → ACK(연결 종료 승인)& FIN(연결 종료 요청) → 공격자 → ACK(연결 종료 성공) → 공격대상

---

    'TCP Flag' 용어


    SYN(SYNchronize Sequence Numbers) → 접속을 요청하는 패킷


    ACK(ACKnowledgement) → 응답 패킷


    RST(Connection ReSeT) → 다시 연결 종료 (이미 연결이 되어 있기 때문에 재접속 하지 않도록 끊어버린다.)


    FIN(FINish) → 연결 종료 요청
---

### TCP 연결 리셋(RST, '연결이 끊어졌다' 또는 '연결이 파기되었다')

- Case 1. 존재하지 않는 포트로 연결을 요청할 때<br>
    - 개요<br>
    → Target의 TCP는 연결을 파기하기 위해 RST 전송<br>
    - 유형<br>
    → 공격자 → SYN → 공격대상 → SYN + RST → 공격자

- Case 2. 비정상적인 상황일 때
    - 개요<br>
    → 정상적인 경로(승인된 경로)를 통한 통신이 아닌 상황
    → 해킹을 종료한 후 이루어진다.<br>
    - 유형<br>
    → 공격자 → RST → 공격대상 <br>
    → **TCP 기반(신뢰성을 기반으로 한)** 이기 때문에 연결 또는 종료 시 공격 대상에게 의사를 묻고 진행해야 함에도 불구하고 이와 같은 과정을 거치지 않고 강제로 **연결을 끊겠다** 라고 말하는 것과 동일하다.
- Case 3. Target이 장시간동안 유휴 상태일 때
    - 개요<br>
    → 연결 종료 요청
    - 유형<br>
    → 공격대상 → **난 현재 휴면 상태야!** → 공격자 → RST
