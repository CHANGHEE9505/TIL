# ğŸ›¡ï¸ IPS (Intrusion Prevention System)
## ğŸ“Œ ê°œìš”

- 'Sophos'ì‚¬ì—ì„œ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì„ ì´ìš©í•´ì„œ ë§Œë“  **UTM(Unified Threat Management) ì¥ë¹„**ë¥¼ ë§í•œë‹¤.
- **IPS(ì¹¨ì…ì°¨ë‹¨ì‹œìŠ¤í…œ), IDS(ì¹¨ì…íƒì§€ì‹œìŠ¤í…œ), Anti Virus, Firewall, VPN** ë“±ì˜ ë³´ì•ˆ ê¸°ëŠ¥ ì¤‘ ìµœëŒ€ **8ê°œ** ì •ë„ë¥¼ **í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì— í†µí•©**í•œ í†µí•© ë³´ì•ˆ ì¥ë¹„ì´ë‹¤.
- ë³´ì•ˆ ì‚¬ê³ ë¥¼ ì˜ˆë°©í•˜ê³  ì‹ ì†íˆ ëŒ€ì‘í•˜ë©°, **ë³´ë‹¤ ì‰½ê²Œ ë³´ì•ˆ ê´€ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ** í•˜ê¸° ìœ„í•´ ê¸°ì¡´ ë³´ì•ˆ ì œí’ˆì„ í†µí•©í•œ ì¥ë¹„ì´ë‹¤.
- í†µí•© ë³´ì•ˆ ê´€ë¦¬ ì¥ë¹„ë¡œì„œ **UTM(Security Management)** ì˜ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.
- íŠ¹íˆ **ë°©í™”ë²½** ì„±ê²©ì´ ê°•í•´ `Sophos UTM Firewall`ì´ë¼ê³ ë„ ë¶ˆë¦°ë‹¤.

---

## âœ… ì¥ì 

- ì—¬ëŸ¬ ë³´ì•ˆ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì— í†µí•©í•¨ìœ¼ë¡œì¨ **ê´€ë¦¬ í¸ì˜ì„±**ì´ ë›°ì–´ë‚¨
- ë³´ì•ˆ ì‚¬ê³ ì— **ì‹ ì†íˆ ëŒ€ì‘** ê°€ëŠ¥
- **ë³µí•©ì ì¸ ë³´ì•ˆ ìœ„í˜‘ì— íš¨ê³¼ì ìœ¼ë¡œ ëŒ€ì‘**

---

## âŒ ë‹¨ì 

- ë‹¤ì–‘í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ í•˜ë‚˜ë¡œ í†µí•©í–ˆê¸° ë•Œë¬¸ì— **ê°œë³„ ì¥ë¹„ ëŒ€ë¹„ ì„±ëŠ¥ì€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŒ**
- **ê³ ì„±ëŠ¥ ë„¤íŠ¸ì›Œí¬ í™˜ê²½**ì—ì„œëŠ” ë³‘ëª©ì´ ìƒê¸¸ ê°€ëŠ¥ì„± ì¡´ì¬

## âš™ï¸ IPS ì£¼ìš” ê¸°ëŠ¥ (Unified Threat Management ê¸°ëŠ¥ êµ¬ì„±)


### ğŸ”’ Firewall

- **Stateful Packet Inspection (SPI)** ê¸°ë°˜ì˜ ë°©í™”ë²½
- SMTP, HTTP, POP3, DNS, Proxy ê¸°ëŠ¥ í†µí•©
- ê²¬ê³ í•œ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±

---

### ğŸ” VPN

- **IPsec VPN** (DES / 3DES ì§€ì›)
- **L2TP VPN** ì§€ì›

---

### ğŸ›¡ï¸ ì¹¨ì… ë°©ì§€ / ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œ

#### IPS (Intrusion Prevention System)
#### IDS (Intrusion Detection System)

- ë‹¤ì–‘í•œ **ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ê³µê²©** íƒì§€ ë° ì°¨ë‹¨
- ë‹¤ì–‘í•œ **ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë°˜ ê³µê²©** íƒì§€ ë° ì°¨ë‹¨
- **ì´ìƒ í–‰ìœ„ íƒì§€(Anomaly Detection)**
- **DoS / DDoS / Scan Attack** ê¸°ë°˜ ê³µê²© íƒì§€ ë° ì°¨ë‹¨

---

### ğŸ¦  Anti Virus

- ì´ë©”ì¼ ê¸°ë°˜ **ë‚´Â·ì™¸ë¶€ ìœ ì… ë°”ì´ëŸ¬ìŠ¤** íƒì§€ ë° ì°¨ë‹¨
- ì›¹ ê¸°ë°˜ **ë‚´Â·ì™¸ë¶€ ìœ ì… ë°”ì´ëŸ¬ìŠ¤** íƒì§€ ë° ì°¨ë‹¨

---

### ğŸ“© Anti-Spam

- **Bayesian ì•Œê³ ë¦¬ì¦˜** ê¸°ë°˜ ìŠ¤íŒ¸ ë©”ì¼ íƒì§€ ë° ì°¨ë‹¨
- **ì ìˆ˜(Score) ë°ì´í„° ê¸°ë°˜** ìŠ¤íŒ¸ ë©”ì¼ íƒì§€ ë° ì°¨ë‹¨

---

### ğŸš« Content Filtering

- **ìœ í•´ ì‚¬ì´íŠ¸ ì°¨ë‹¨**
- **ì •ì±… ìœ„ë°° ì›¹ì‚¬ì´íŠ¸** ì ‘ê·¼ íƒì§€ ë° ì°¨ë‹¨

---

### ğŸ” Scan Attack íƒì§€ ë° ì°¨ë‹¨

- Scan Attack ìœ í˜•ì˜ ê³µê²©ì„ ê°ì§€í•˜ê³  ì°¨ë‹¨

---

### ğŸ§© ê¸°íƒ€ ê¸°ëŠ¥

- **Transparent / Router / NAT ëª¨ë“œ** ì§€ì›
- **í”¼ì‹± ì°¨ë‹¨**, **SIP Proxy ê¸°ëŠ¥** ì œê³µ

## 5. **Sophos UTM (Unified Threat Management, í†µí•© ìœ„í˜‘ ê´€ë¦¬)** 


### ì‘ì—…

#### [ë‹¤ìš´ë¡œë“œ](https://www.sophos.com/en-us/support/downloads/utm-downloads)
#### ë„¤íŠ¸ì›Œí¬ ì–´ëí„° ì„¤ì •
 - VMNet1 (Internal)
 - VMNet2 (DMZ)
 - VMNet3 (External)

![](./img/IPS.img/0001.png)

#### ì‹œìŠ¤í…œ êµ¬ì„± 1. ê¸°ë³¸ ì„¤ì •

![](./img/IPS.img/0002.png)

![](./img/IPS.img/0003.png)

![](./img/IPS.img/0004.png)

![](./img/IPS.img/0005.png)

![](./img/IPS.img/0006.png)

![](./img/IPS.img/0007.png)

#### ì‹œìŠ¤í…œ êµ¬ì„± 2. ì„¸ë¶€ ì„¤ì •

![](./img/IPS.img/0008.png)

![](./img/IPS.img/0009.png)

![](./img/IPS.img/0010.png)

![](./img/IPS.img/0011.png)

![](./img/IPS.img/0012.png)

![](./img/IPS.img/0013.png)

#### ì„¤ì¹˜

![](./img/IPS.img/0014.png)

![](./img/IPS.img/0015.png)

![](./img/IPS.img/0016.png)

![](./img/IPS.img/0017.png)

![](./img/IPS.img/0018.png)

![](./img/IPS.img/0019.png)

![](./img/IPS.img/0020.png)

![](./img/IPS.img/0021.png)

![](./img/IPS.img/0022.png)

![](./img/IPS.img/0023.png)

#### [ì ‘ì† í˜¸ìŠ¤íŠ¸](https://192.168.1.100:4444)

![](./img/IPS.img/0024.png)

![](./img/IPS.img/0025.png)

![](./img/IPS.img/0026.png)

![](./img/IPS.img/0027.png)

![](./img/IPS.img/0028.png)

![](./img/IPS.img/0029.png)

![](./img/IPS.img/0030.png)

**ì˜µì…˜**

![](./img/IPS.img/0031.png)


![](./img/IPS.img/0032.png)

### ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ ë©”ë‰´ êµ¬ì„±
- Network Protection
    - NAT, Firewall, Application Services(FTP, HTTP, ...)

![](./img/IPS.img/0033.png)

- Web Protection
    - Clientë¥¼ ì™¸ë¶€ë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ì—­í• (ì‚¬ìš©ì ë³´í˜¸, Web Server ë³´í˜¸ ëŒ€ìƒ ì œì™¸)
    - UTM ì¥ë¹„ í•„í„°ë§, ê²€ì‚¬ (ACL ìœ ì‚¬)

![](./img/IPS.img/0034.png)

- Webserver Protection
    - Web Hacking ë°©ì–´ ìš©ë„

![](./img/IPS.img/0035.png)



### ë„¤íŠ¸ì›Œí¬

### Step 1. **Dashboard**ë¥¼ í´ë¦­í•œ í›„ ìš°ì¸¡ì— ìˆëŠ” **Interfaces**ì˜ ëª©ë¡ì„ í™•ì¸í•œë‹¤.
    - ê¸°ë³¸ì ìœ¼ë¡œ **VMnet1**ë§Œ **í™œì„±í™”** ë˜ì–´ ìˆë‹¤.

### Step 2. **Interface** ì¶”ê°€

- **Interfaces & Routing** í•˜ë‹¨ì— ìˆëŠ” **Interfaces**ë¥¼ í´ë¦­í•œë‹¤.
- ìš°ì¸¡ì— ìˆëŠ” **Interfaces** íƒ­ í•˜ë‹¨ì— ìˆëŠ” **New Interface...** ë¥¼ í´ë¦­í•œë‹¤.
 
![](./img/IPS.img/0036.png)

![](./img/IPS.img/0037.png)

![](./img/IPS.img/0038.png)

- Internal (ê¸°ë³¸ê°’ìœ¼ë¡œ ì¡í˜€ ìˆê¸° ë•Œë¬¸ì— í™•ì¸í•œë‹¤.)
    - Name(Internal) / Type(Ethernet) / Hardware(eth0) / IP(192.168.1.100/24)

- DMZ
    - Nme(DMX) /Type(Ethernet) / Hardware(eth1) / IP(192.168.2.254/24)

- External
    - Nme(External) /Type(Ethernet) / Hardware(eth2) / IP(192.168.3.253/24)

- **í™œì„±í™”** ë‹¨ì¶”ë¥¼ í´ë¦­í•œ í›„ **ì´ˆë¡ìƒ‰** ìœ¼ë¡œ ë°”ë€ŒëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
- **VMWare** ì— ì¶œë ¥ë˜ì–´ ìˆëŠ”  **UTM** ê°€ìƒë¨¸ì‹ ì—ì„œ **root/P@ssw0rd**ë¥¼ ì…ë ¥í•œë‹¤.
- **ifconfig** ëª…ë ¹ì–´ë¡œ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.

 
### Step 3. ì™¸ë¶€ë§ê³¼ì˜ í†µì‹  ì„¤ì •
- í˜„ì¬ **/etc/resolv.conf**ì—ëŠ” **Loopback Address**ì¸ **127.0.0.1**ë¡œ ì¡í˜€ìˆë‹¤.
- **1st. Super DNS ì£¼ì†Œ**ì¸ **168.126.63.1**ë¡œ ë³€ê²½í•œë‹¤.
- í…ŒìŠ¤íŠ¸ 1. **ping 8.8.8.8** ë˜ëŠ” **ping google.com**
    - **connect: Network is unreachable**ì´ ì¶œë ¥ëœë‹¤.

![](./img/IPS.img/0039.png)
web ë§ê³  VMWare ë¨¼ì € ì ‘ì†ì‹œ ì´ˆê¸°ì„¤ì • ë°”ë¡œ ì§„í–‰

![](./img/IPS.img/0040.png)

![](./img/IPS.img/0041.png)

![](./img/IPS.img/0042.png)

![](./img/IPS.img/0043.png)

![](./img/IPS.img/0044.png)

![](./img/IPS.img/0045.png)

vi /etc/resolv.conf<br>
super dns

![](./img/IPS.img/0046.png)
```
route add default gw 192.168.10.2 eth2
```
ping í™•ì¸

![](./img/IPS.img/0047.png)


